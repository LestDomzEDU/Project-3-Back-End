plugins {
    id 'org.springframework.boot' version '3.3.0'      // or your current Boot 3.x
    id 'io.spring.dependency-management' version '1.1.5'
    id 'java'
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

tasks.withType(JavaCompile) {
    options.release = 17
}

tasks.named('test') {
    useJUnitPlatform()
}

tasks.named('bootJar') {
    archiveFileName = 'app.jar'
}

tasks.named('jar') { enabled = false }  // ensure we ship the bootJar

// Heroku runs `gradlew assemble` by default; ensure assemble builds the boot jar
tasks.named('assemble') {
    dependsOn tasks.named('bootJar')
}
